<!DOCTYPE html>
<html>
  <head>
    <title>Planifier Mes Lieux de Visite</title>
    <style>
      #map {
        height: 500px;
        width: 100%;
      }
      #controls {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
      }
      .list {
        margin-top: 20px;
      }
      .list-item {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }
      .list-item input[type="checkbox"] {
        margin-right: 10px;
      }
      .color-box {
        width: 15px;
        height: 15px;
        margin-right: 10px;
      }
    </style>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"
      defer
    ></script>
    <script>
      let map;
      let markers = [];
      let places = [];

      function initMap() {
        // Initialise la carte centrée sur Paris
        map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: 48.8566, lng: 2.3522 },
          zoom: 12,
        });

        map.addListener("click", (event) => {
          const placeName = prompt("Entrez le nom du lieu:");
          const visitDay = prompt("Entrez le jour de visite (Ex: Jour 1):");
          const color = prompt("Entrez la couleur pour l'étiquette (Ex: red, blue, green):");

          if (placeName && visitDay && color) {
            addPlace(event.latLng, placeName, visitDay, color);
          }
        });
      }

      function addPlace(location, name, day, color) {
        // Ajouter un marqueur sur la carte
        const marker = new google.maps.Marker({
          position: location,
          map: map,
          label: {
            text: name,
            color: "white",
            fontSize: "12px",
            fontWeight: "bold",
          },
          icon: {
            url: "http://maps.google.com/mapfiles/ms/icons/" + color + "-dot.png",
          },
        });
        markers.push(marker);

        const place = {
          name: name,
          location: location,
          day: day,
          marker: marker,
          color: color,
        };
        places.push(place);
        updatePlaceList();
      }

      function updatePlaceList() {
        const placeList = document.getElementById("place-list");
        placeList.innerHTML = "";

        places.forEach((place, index) => {
          const listItem = document.createElement("div");
          listItem.classList.add("list-item");

          const checkBox = document.createElement("input");
          checkBox.type = "checkbox";
          checkBox.addEventListener("click", () => removePlace(index));

          const colorBox = document.createElement("div");
          colorBox.classList.add("color-box");
          colorBox.style.backgroundColor = place.color;

          const label = document.createElement("span");
          label.innerText = `${place.name} - ${place.day}`;

          const editButton = document.createElement("button");
          editButton.innerText = "Modifier";
          editButton.addEventListener("click", () => editPlace(index));

          listItem.appendChild(checkBox);
          listItem.appendChild(colorBox);
          listItem.appendChild(label);
          listItem.appendChild(editButton);

          placeList.appendChild(listItem);
        });
      }

      function removePlace(index) {
        // Supprime le marqueur de la carte
        markers[index].setMap(null);
        markers.splice(index, 1);
        places.splice(index, 1);
        updatePlaceList();
      }

      function editPlace(index) {
        const newDay = prompt("Modifier le jour de visite:", places[index].day);
        if (newDay) {
          places[index].day = newDay;
          updatePlaceList();
        }
      }
    </script>
  </head>
  <body onload="initMap()">
    <h1>Planifier Mes Lieux de Visite</h1>

    <div id="map"></div>

    <div class="list" id="place-list">
      <h2>Lieux de Visite</h2>
      <!-- Les lieux ajoutés apparaîtront ici -->
    </div>
  </body>
</html>
